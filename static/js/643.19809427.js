"use strict";(self["webpackChunkvue_action"]=self["webpackChunkvue_action"]||[]).push([[643],{90643:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});n(2008),n(62062),n(26099);var r=function(){var e=this,t=e._self._c;return t("div",[t("label",{attrs:{for:"dev"}},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedDevice,expression:"selectedDevice"}],attrs:{id:"dev",name:"dev"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedDevice=t.target.multiple?n:n[0]}}},e._l(e.devices,(function(n){return t("option",{key:n.deviceId,domProps:{value:n.deviceId}},[e._v(" "+e._s(n.label))])})),0)]),t("button",{on:{click:e.startCapture}},[e._v("Start Capture")]),t("button",{on:{click:e.stopCapture}},[e._v("Stop Capture")]),t("button",{on:{click:e.takePhoto}},[e._v("Take Photo")]),t("video",{ref:"videoElement",attrs:{autoplay:""}},[t("track",{attrs:{kind:"captions",src:"captions.vtt",srclang:"en",label:"English"}})]),t("canvas",{ref:"canvas",staticStyle:{display:"none"}}),t("img",{attrs:{src:e.photo,alt:"Captured Photo"}})])},o=[],a=n(47546),i=n(24634),c=(n(76918),n(51629),n(44114),n(34782),n(11745),n(38309),n(16573),n(78100),n(77936),n(21489),n(48140),n(81630),n(72170),n(75044),n(69539),n(31694),n(89955),n(21903),n(91134),n(33206),n(44496),n(66651),n(12887),n(19369),n(66812),n(8995),n(31575),n(36072),n(88747),n(28845),n(29423),n(57301),n(373),n(86614),n(41405),n(37467),n(44732),n(33684),n(79577),n(2945),n(23500),n(55815),n(64979),n(79739),n(76031),n(14874));const s={data:function(){return{devices:[],selectedDevice:null,videoStream:null,photo:null}},created:function(){var e=this;return(0,i.A)((0,a.A)().mark((function t(){return(0,a.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getVideoDevices();case 2:case"end":return t.stop()}}),t)})))()},mounted:function(){setInterval((function(){c.A.post("/srv/GET-MONITOR",{}).then((function(e){console.log(e.data)}))["catch"]((function(e){console.log(e)}))}),1e3)},methods:{getVideoDevices:function(){var e=this;return(0,i.A)((0,a.A)().mark((function t(){var n;return(0,a.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.mediaDevices.enumerateDevices();case 3:n=t.sent,console.log(n,"..."),e.devices=n.filter((function(e){return"videoinput"===e.kind})),e.devices.length>0&&(e.selectedDevice=e.devices[0].deviceId),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.error("Error getting video devices:",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},startCapture:function(){var e=this;return(0,i.A)((0,a.A)().mark((function t(){var n,r;return(0,a.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n={video:!0},console.log(e.selectedDevice),t.next=5,navigator.mediaDevices.getUserMedia(n);case 5:r=t.sent,e.videoStream=r,e.$refs.videoElement.srcObject=r,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),console.error("Error accessing camera:",t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},stopCapture:function(){if(this.videoStream){var e=this.videoStream.getTracks();e.forEach((function(e){return e.stop()})),this.$refs.videoElement.srcObject=null,this.videoStream=null}},takePhoto:function(){var e=this.$refs,t=e.video,n=e.canvas;console.log(t,this.$refs.videoElement.videoWidth),n.width=this.$refs.videoElement.videoWidth,n.height=this.$refs.videoElement.videoHeight;var r=n.getContext("2d");r.drawImage(this.$refs.videoElement,0,0,n.width,n.height),this.photo=n.toDataURL("image/png"),console.log(this.photo,"``````");var o=document.createElement("a");o.href=this.photo,o.download="photo.jpg",o.click()},base64ToBlob:function(e,t){for(var n=1024,r=atob(e),o=[],a=0;a<r.length;a+=n){for(var i=r.slice(a,a+n),c=new Array(i.length),s=0;s<i.length;s+=1)c[s]=i.charCodeAt(s);var l=new Uint8Array(c);o.push(l)}return new Blob(o,{type:t})}}},l=s;var v=n(81656),u=(0,v.A)(l,r,o,!1,null,null,null);const d=u.exports}}]);
//# sourceMappingURL=643.19809427.js.map