"use strict";(self["webpackChunkvue_action"]=self["webpackChunkvue_action"]||[]).push([[721],{47721:(t,e,i)=>{i.r(e),i.d(e,{default:()=>v});var s=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticStyle:{"margin-top":"6%"}}),e("el-button",{staticStyle:{"margin-left":"14%"},attrs:{type:"primary"},on:{click:t.openFullScreen2}},[t._v(" Check Test ")]),e("el-row",[e("el-col",{attrs:{span:3}},[e("div",{staticClass:"grid-content bg-light"})]),e("el-col",{attrs:{span:9}},[e("div",{staticClass:"grid-content bg-light",staticStyle:{"margin-top":"5%","margin-left":"5%"}},[t._v(" Monitor ")])]),e("el-col",{attrs:{span:9}},[t.dispTitle?e("div",{staticClass:"grid-content bg-light"},[e("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[e("el-col",{staticStyle:{"font-size":"small"},attrs:{span:4}},[e("el-result",{attrs:{icon:"success"}})],1),e("el-col",{attrs:{span:20}},[t._v("result message...")])],1)],1):t._e()]),e("el-col",{attrs:{span:3}},[e("div",{staticClass:"grid-content bg-light"})])],1),e("el-row",[e("el-col",{attrs:{span:3}},[e("div",{staticClass:"grid-content bg-light"})]),e("el-col",{attrs:{span:9}},[e("div",{staticClass:"grid-content bg-light",attrs:{type:"flex",justify:"center",align:"middle"}},[e("video",{ref:"videoElement0",staticStyle:{"border-radius":"20px"},attrs:{autoplay:""}},[e("track",{attrs:{kind:"captions",src:"captions.vtt",srclang:"en",label:"English"}})])])]),e("el-col",{attrs:{span:9}},[e("div",{staticClass:"grid-content bg-light",attrs:{type:"flex",justify:"center",align:"middle"}},[t.disp?e("video",{ref:"videoElement1",staticStyle:{"border-radius":"20px"},attrs:{autoplay:""}},[e("track",{attrs:{kind:"captions",src:"captions.vtt",srclang:"en",label:"English"}})]):t._e(),e("div",[e("canvas",{ref:"canvas",staticStyle:{display:"none","border-radius":"20px"}}),e("img",{ref:"img",staticStyle:{"border-radius":"20px"},attrs:{src:t.photo,alt:"Captured Photo"}})])])]),e("el-col",{attrs:{span:3}},[e("div",{staticClass:"grid-content bg-light"})])],1)],1)},n=[],r=i(47546),a=i(24634),c=(i(76918),i(2008),i(51629),i(44114),i(34782),i(11745),i(38309),i(16573),i(78100),i(77936),i(26099),i(21489),i(48140),i(81630),i(72170),i(75044),i(69539),i(31694),i(89955),i(21903),i(91134),i(33206),i(44496),i(66651),i(12887),i(19369),i(66812),i(8995),i(31575),i(36072),i(88747),i(28845),i(29423),i(57301),i(373),i(86614),i(41405),i(37467),i(44732),i(33684),i(79577),i(2945),i(23500),i(55815),i(64979),i(79739),i(76031),i(14874));const l={data:function(){return{devices:[],selectedDevice:null,videoStream:null,photo:null,disp:!0,dispTitle:!1}},created:function(){var t=this;return(0,a.A)((0,r.A)().mark((function e(){return(0,r.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getVideoDevices();case 2:case"end":return e.stop()}}),e)})))()},mounted:function(){var t=this;this.$nextTick((function(){t.$refs.img.style.visibility="hidden"})),this.startCapture(),setInterval((function(){c.A.post("/srv/GET-MONITOR",{}).then((function(e){!0===e.data.MonitorSig&&t.openFullScreen2()}))["catch"]((function(t){console.log(t)}))}),1e3)},methods:{getVideoDevices:function(){var t=this;return(0,a.A)((0,r.A)().mark((function e(){var i;return(0,r.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.enumerateDevices();case 3:i=e.sent,t.devices=i.filter((function(t){return"videoinput"===t.kind})),t.devices.length>0&&(t.selectedDevice=t.devices[0].deviceId),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.error("Error getting video devices:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},startCapture:function(){var t=this;return(0,a.A)((0,r.A)().mark((function e(){var i,s;return(0,r.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,i={video:!0},e.next=4,navigator.mediaDevices.getUserMedia(i);case 4:s=e.sent,t.videoStream=s,t.$refs.videoElement0.srcObject=s,t.$refs.videoElement1.srcObject=s,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),console.error("Error accessing camera:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()},stopCapture:function(){if(this.videoStream){var t=this.videoStream.getTracks();t.forEach((function(t){return t.stop()})),this.$refs.videoElement.srcObject=null,this.videoStream=null}},takePhoto:function(){var t=this.$refs.canvas;t.width=this.$refs.videoElement0.videoWidth,t.height=this.$refs.videoElement0.videoHeight;var e=t.getContext("2d");e.drawImage(this.$refs.videoElement0,0,0,t.width,t.height),this.photo=t.toDataURL("image/png")},base64ToBlob:function(t,e){for(var i=1024,s=atob(t),n=[],r=0;r<s.length;r+=i){for(var a=s.slice(r,r+i),c=new Array(a.length),l=0;l<a.length;l+=1)c[l]=a.charCodeAt(l);var o=new Uint8Array(c);n.push(o)}return new Blob(n,{type:e})},openFullScreen2:function(){var t=this,e=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.dispTitle=!1,setTimeout((function(){t.disp=!1,t.$refs.img.style.visibility="",t.takePhoto(),e.close(),t.dispTitle=!0}),3e3)}}},o=l;var d=i(81656),u=(0,d.A)(o,s,n,!1,null,null,null);const v=u.exports}}]);
//# sourceMappingURL=721.87e15877.js.map