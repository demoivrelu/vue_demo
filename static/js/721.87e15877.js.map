{"version":3,"file":"static/js/721.87e15877.js","mappings":"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","sources":["webpack://vue_action/./src/pages/CamCheck.vue","webpack://vue_action/src/pages/CamCheck.vue","webpack://vue_action/./src/pages/CamCheck.vue?0c9d","webpack://vue_action/./src/pages/CamCheck.vue?2ee4"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{staticStyle:{\"margin-top\":\"6%\"}}),_c('el-button',{staticStyle:{\"margin-left\":\"14%\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.openFullScreen2}},[_vm._v(\" Check Test \")]),_c('el-row',[_c('el-col',{attrs:{\"span\":3}},[_c('div',{staticClass:\"grid-content bg-light\"})]),_c('el-col',{attrs:{\"span\":9}},[_c('div',{staticClass:\"grid-content bg-light\",staticStyle:{\"margin-top\":\"5%\",\"margin-left\":\"5%\"}},[_vm._v(\" Monitor \")])]),_c('el-col',{attrs:{\"span\":9}},[(_vm.dispTitle)?_c('div',{staticClass:\"grid-content bg-light\"},[_c('el-row',{attrs:{\"type\":\"flex\",\"justify\":\"center\",\"align\":\"middle\"}},[_c('el-col',{staticStyle:{\"font-size\":\"small\"},attrs:{\"span\":4}},[_c('el-result',{attrs:{\"icon\":\"success\"}})],1),_c('el-col',{attrs:{\"span\":20}},[_vm._v(\"result message...\")])],1)],1):_vm._e()]),_c('el-col',{attrs:{\"span\":3}},[_c('div',{staticClass:\"grid-content bg-light\"})])],1),_c('el-row',[_c('el-col',{attrs:{\"span\":3}},[_c('div',{staticClass:\"grid-content bg-light\"})]),_c('el-col',{attrs:{\"span\":9}},[_c('div',{staticClass:\"grid-content bg-light\",attrs:{\"type\":\"flex\",\"justify\":\"center\",\"align\":\"middle\"}},[_c('video',{ref:\"videoElement0\",staticStyle:{\"border-radius\":\"20px\"},attrs:{\"autoplay\":\"\"}},[_c('track',{attrs:{\"kind\":\"captions\",\"src\":\"captions.vtt\",\"srclang\":\"en\",\"label\":\"English\"}})])])]),_c('el-col',{attrs:{\"span\":9}},[_c('div',{staticClass:\"grid-content bg-light\",attrs:{\"type\":\"flex\",\"justify\":\"center\",\"align\":\"middle\"}},[(_vm.disp)?_c('video',{ref:\"videoElement1\",staticStyle:{\"border-radius\":\"20px\"},attrs:{\"autoplay\":\"\"}},[_c('track',{attrs:{\"kind\":\"captions\",\"src\":\"captions.vtt\",\"srclang\":\"en\",\"label\":\"English\"}})]):_vm._e(),_c('div',[_c('canvas',{ref:\"canvas\",staticStyle:{\"display\":\"none\",\"border-radius\":\"20px\"}}),_c('img',{ref:\"img\",staticStyle:{\"border-radius\":\"20px\"},attrs:{\"src\":_vm.photo,\"alt\":\"Captured Photo\"}})])])]),_c('el-col',{attrs:{\"span\":3}},[_c('div',{staticClass:\"grid-content bg-light\"})])],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div style=\"margin-top: 6%;\"></div>\n    <el-button\n      style=\"margin-left: 14%;\"\n      type=\"primary\"\n      @click=\"openFullScreen2\">\n      Check Test\n    </el-button>\n    <el-row>\n      <el-col :span=\"3\"><div class=\"grid-content bg-light\"></div></el-col>\n      <el-col :span=\"9\" >\n        <div class=\"grid-content bg-light\" style=\"margin-top: 5%; margin-left: 5%;\">\n          Monitor\n        </div>\n      </el-col>\n      <el-col :span=\"9\">\n        <div class=\"grid-content bg-light\" v-if=\"dispTitle\">\n          <el-row type=\"flex\" justify=\"center\" align=\"middle\">\n            <el-col :span=\"4\" style=\"font-size: small;\">\n              <el-result icon=\"success\">\n              </el-result>\n            </el-col>\n            <el-col :span=\"20\">result message...</el-col>\n          </el-row>\n        </div>\n      </el-col>\n      <el-col :span=\"3\"><div class=\"grid-content bg-light\"></div></el-col>\n    </el-row>\n    <el-row>\n      <el-col :span=\"3\"><div class=\"grid-content bg-light\"></div></el-col>\n      <el-col :span=\"9\">\n        <div class=\"grid-content bg-light\" type=\"flex\" justify=\"center\" align=\"middle\">\n          <video ref=\"videoElement0\" autoplay style=\"border-radius: 20px;\">\n            <track kind=\"captions\" src=\"captions.vtt\" srclang=\"en\" label=\"English\">\n          </video>\n        </div>\n      </el-col>\n      <el-col :span=\"9\">\n        <div class=\"grid-content bg-light\" type=\"flex\" justify=\"center\" align=\"middle\">\n          <video v-if=\"disp\" ref=\"videoElement1\" autoplay style=\"border-radius: 20px;\">\n            <track kind=\"captions\" src=\"captions.vtt\" srclang=\"en\" label=\"English\">\n          </video>\n          <div>\n            <canvas ref=\"canvas\" style=\"display: none;  border-radius: 20px;\" ></canvas>\n            <img ref=\"img\" :src=\"photo\" style=\"border-radius: 20px; \"\n              alt=\"Captured Photo\" >\n          </div>\n        </div>\n      </el-col>\n      <el-col :span=\"3\"><div class=\"grid-content bg-light\"></div></el-col>\n    </el-row>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport 'element-ui/lib/theme-chalk/index.css';\n\nexport default {\n  data() {\n    return {\n      devices: [],\n      selectedDevice: null,\n      videoStream: null,\n      photo: null,\n      disp: true,\n      dispTitle: false,\n    };\n  },\n  async created() {\n    await this.getVideoDevices();\n  },\n  mounted() {\n    this.$nextTick(() => {\n      this.$refs.img.style.visibility = 'hidden';\n    });\n    this.startCapture();\n    setInterval(() => {\n      axios.post('/srv/GET-MONITOR', {\n      })\n        .then((res) => {\n          if (res.data.MonitorSig === true) {\n            this.openFullScreen2();\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    }, 1000);\n  },\n  methods: {\n    async getVideoDevices() {\n      try {\n        const devices = await navigator.mediaDevices.enumerateDevices();\n        this.devices = devices.filter((device) => device.kind === 'videoinput');\n        if (this.devices.length > 0) {\n          this.selectedDevice = this.devices[0].deviceId;\n        }\n      } catch (error) {\n        console.error('Error getting video devices:', error);\n      }\n    },\n    async startCapture() {\n      try {\n        const constraints = {\n          video: true,\n        };\n        const stream = await navigator.mediaDevices.getUserMedia(constraints);\n        this.videoStream = stream;\n        this.$refs.videoElement0.srcObject = stream;\n        this.$refs.videoElement1.srcObject = stream;\n      } catch (error) {\n        console.error('Error accessing camera:', error);\n      }\n    },\n    stopCapture() {\n      if (this.videoStream) {\n        const tracks = this.videoStream.getTracks();\n        tracks.forEach((track) => track.stop());\n        this.$refs.videoElement.srcObject = null;\n        this.videoStream = null;\n      }\n    },\n    takePhoto() {\n      const { canvas } = this.$refs;\n      // (video);\n      canvas.width = this.$refs.videoElement0.videoWidth;\n      canvas.height = this.$refs.videoElement0.videoHeight;\n      const context = canvas.getContext('2d');\n      context.drawImage(this.$refs.videoElement0, 0, 0, canvas.width, canvas.height);\n      this.photo = canvas.toDataURL('image/png');\n      // const blob = this.base64ToBlob(this.photo, 'image/jpeg');\n      // 将 Blob 对象保存为文件\n      // const link = document.createElement('a');\n      // link.href = this.photo;\n      // link.download = 'photo.jpg';\n      // link.click();\n    },\n    base64ToBlob(base64Data, contentType) {\n      // const contentType = contentType || '';\n      const sliceSize = 1024;\n      const byteCharacters = atob(base64Data);\n      const byteArrays = [];\n      for (let offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n        const slice = byteCharacters.slice(offset, offset + sliceSize);\n        const byteNumbers = new Array(slice.length);\n        for (let i = 0; i < slice.length; i += 1) {\n          byteNumbers[i] = slice.charCodeAt(i);\n        }\n        const byteArray = new Uint8Array(byteNumbers);\n        byteArrays.push(byteArray);\n      }\n      return new Blob(byteArrays, { type: contentType });\n    },\n    openFullScreen2() {\n      const loading = this.$loading({\n        lock: true,\n        text: 'Loading',\n        spinner: 'el-icon-loading',\n        background: 'rgba(0, 0, 0, 0.7)',\n      });\n      this.dispTitle = false;\n      setTimeout(() => {\n        this.disp = false;\n        this.$refs.img.style.visibility = '';\n        this.takePhoto();\n        loading.close();\n        this.dispTitle = true;\n      }, 3000);\n    },\n  },\n};\n</script>\n\n<style>\n  .el-row {\n    /* margin-bottom: 20px; */\n    /* margin-top: 20px; */\n  }\n  .el-col {\n    border-radius: 4px;\n  }\n  .bg-purple-dark {\n    background: #99a9bf;\n  }\n  .bg-purple {\n    background: #d3dce6;\n  }\n  .bg-purple-light {\n    background: #e5e9f2;\n  }\n  .grid-content {\n    border-radius: 4px;\n    min-height: 36px;\n  }\n  .row-bg {\n    padding: 10px 0;\n    background-color: #f9fafc;\n  }\n  .el-result {\n    transform: scale(0.75);\n    margin-top: -30%;\n    margin-bottom: -30%;\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CamCheck.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CamCheck.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./CamCheck.vue?vue&type=template&id=5350e16e\"\nimport script from \"./CamCheck.vue?vue&type=script&lang=js\"\nexport * from \"./CamCheck.vue?vue&type=script&lang=js\"\nimport style0 from \"./CamCheck.vue?vue&type=style&index=0&id=5350e16e&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticStyle","attrs","on","openFullScreen2","_v","staticClass","dispTitle","_e","ref","disp","photo","staticRenderFns","data","devices","selectedDevice","videoStream","created","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","getVideoDevices","stop","mounted","_this2","$nextTick","$refs","img","style","visibility","startCapture","setInterval","axios","post","then","res","MonitorSig","err","console","log","methods","_this3","_callee2","_context2","navigator","mediaDevices","enumerateDevices","sent","filter","device","kind","length","deviceId","t0","error","_this4","_callee3","constraints","stream","_context3","video","getUserMedia","videoElement0","srcObject","videoElement1","stopCapture","tracks","getTracks","forEach","track","videoElement","takePhoto","canvas","width","videoWidth","height","videoHeight","context","getContext","drawImage","toDataURL","base64ToBlob","base64Data","contentType","sliceSize","byteCharacters","atob","byteArrays","offset","slice","byteNumbers","Array","i","charCodeAt","byteArray","Uint8Array","push","Blob","type","_this5","loading","$loading","lock","text","spinner","background","setTimeout","close","component"],"sourceRoot":""}