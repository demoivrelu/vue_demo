{"version":3,"file":"static/js/643.19809427.js","mappings":"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","sources":["webpack://vue_action/./src/pages/CamVideoMulti.vue","webpack://vue_action/src/pages/CamVideoMulti.vue","webpack://vue_action/./src/pages/CamVideoMulti.vue?e8c9","webpack://vue_action/./src/pages/CamVideoMulti.vue?cb36"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('label',{attrs:{\"for\":\"dev\"}},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectedDevice),expression:\"selectedDevice\"}],attrs:{\"id\":\"dev\",\"name\":\"dev\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.selectedDevice=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.devices),function(device){return _c('option',{key:device.deviceId,domProps:{\"value\":device.deviceId}},[_vm._v(\" \"+_vm._s(device.label))])}),0)]),_c('button',{on:{\"click\":_vm.startCapture}},[_vm._v(\"Start Capture\")]),_c('button',{on:{\"click\":_vm.stopCapture}},[_vm._v(\"Stop Capture\")]),_c('button',{on:{\"click\":_vm.takePhoto}},[_vm._v(\"Take Photo\")]),_c('video',{ref:\"videoElement\",attrs:{\"autoplay\":\"\"}},[_c('track',{attrs:{\"kind\":\"captions\",\"src\":\"captions.vtt\",\"srclang\":\"en\",\"label\":\"English\"}})]),_c('canvas',{ref:\"canvas\",staticStyle:{\"display\":\"none\"}}),_c('img',{attrs:{\"src\":_vm.photo,\"alt\":\"Captured Photo\"}})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <label for=\"dev\">\n      <select id=\"dev\" name=\"dev\" v-model=\"selectedDevice\">\n        <option v-for=\"device in devices\" :key=\"device.deviceId\" :value=\"device.deviceId\">\n          {{ device.label }}</option>\n      </select>\n    </label>\n    <button @click=\"startCapture\">Start Capture</button>\n    <button @click=\"stopCapture\">Stop Capture</button>\n    <button @click=\"takePhoto\">Take Photo</button>\n    <video ref=\"videoElement\" autoplay>\n      <track kind=\"captions\" src=\"captions.vtt\" srclang=\"en\" label=\"English\">\n    </video>\n    <canvas ref=\"canvas\" style=\"display: none;\"></canvas>\n    <img :src=\"photo\" alt=\"Captured Photo\">\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  data() {\n    return {\n      devices: [],\n      selectedDevice: null,\n      videoStream: null,\n      photo: null,\n    };\n  },\n  async created() {\n    await this.getVideoDevices();\n  },\n  mounted() {\n    setInterval(() => {\n      axios.post('/srv/GET-MONITOR', {\n      })\n        .then((res) => {\n          console.log(res.data);\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    }, 1000);\n  },\n  methods: {\n    async getVideoDevices() {\n      try {\n        const devices = await navigator.mediaDevices.enumerateDevices();\n        console.log(devices, '...');\n        this.devices = devices.filter((device) => device.kind === 'videoinput');\n        if (this.devices.length > 0) {\n          this.selectedDevice = this.devices[0].deviceId;\n        }\n      } catch (error) {\n        console.error('Error getting video devices:', error);\n      }\n    },\n    async startCapture() {\n      try {\n        const constraints = {\n          // video: {\n          //   deviceId: { exact: this.selectedDevice },\n          // },\n          video: true,\n        };\n        console.log(this.selectedDevice);\n        const stream = await navigator.mediaDevices.getUserMedia(constraints);\n        this.videoStream = stream;\n        this.$refs.videoElement.srcObject = stream;\n      } catch (error) {\n        console.error('Error accessing camera:', error);\n      }\n    },\n    stopCapture() {\n      if (this.videoStream) {\n        const tracks = this.videoStream.getTracks();\n        tracks.forEach((track) => track.stop());\n        this.$refs.videoElement.srcObject = null;\n        this.videoStream = null;\n      }\n    },\n    takePhoto() {\n      const { video, canvas } = this.$refs;\n      console.log(video, this.$refs.videoElement.videoWidth);\n      canvas.width = this.$refs.videoElement.videoWidth;\n      canvas.height = this.$refs.videoElement.videoHeight;\n      const context = canvas.getContext('2d');\n      context.drawImage(this.$refs.videoElement, 0, 0, canvas.width, canvas.height);\n      this.photo = canvas.toDataURL('image/png');\n      console.log(this.photo, '``````');\n      // const blob = this.base64ToBlob(this.photo, 'image/jpeg');\n      // 将 Blob 对象保存为文件\n      const link = document.createElement('a');\n      // link.href = URL.createObjectURL(blob);\n      link.href = this.photo;\n      link.download = 'photo.jpg';\n      link.click();\n    },\n    base64ToBlob(base64Data, contentType) {\n      // const contentType = contentType || '';\n      const sliceSize = 1024;\n      const byteCharacters = atob(base64Data);\n      const byteArrays = [];\n      for (let offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n        const slice = byteCharacters.slice(offset, offset + sliceSize);\n        const byteNumbers = new Array(slice.length);\n        for (let i = 0; i < slice.length; i += 1) {\n          byteNumbers[i] = slice.charCodeAt(i);\n        }\n        const byteArray = new Uint8Array(byteNumbers);\n        byteArrays.push(byteArray);\n      }\n      return new Blob(byteArrays, { type: contentType });\n    },\n  },\n};\n</script>\n\n<style>\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CamVideoMulti.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CamVideoMulti.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./CamVideoMulti.vue?vue&type=template&id=6c95056d\"\nimport script from \"./CamVideoMulti.vue?vue&type=script&lang=js\"\nexport * from \"./CamVideoMulti.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","directives","name","rawName","value","selectedDevice","expression","on","$event","$$selectedVal","Array","prototype","filter","call","target","options","o","selected","map","val","_value","multiple","_l","devices","device","key","deviceId","domProps","_v","_s","label","startCapture","stopCapture","takePhoto","ref","staticStyle","photo","staticRenderFns","data","videoStream","created","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","getVideoDevices","stop","mounted","setInterval","axios","post","then","res","console","log","err","methods","_this2","_callee2","_context2","navigator","mediaDevices","enumerateDevices","sent","kind","length","t0","error","_this3","_callee3","constraints","stream","_context3","video","getUserMedia","$refs","videoElement","srcObject","tracks","getTracks","forEach","track","_this$$refs","canvas","videoWidth","width","height","videoHeight","context","getContext","drawImage","toDataURL","link","document","createElement","href","download","click","base64ToBlob","base64Data","contentType","sliceSize","byteCharacters","atob","byteArrays","offset","slice","byteNumbers","i","charCodeAt","byteArray","Uint8Array","push","Blob","type","component"],"sourceRoot":""}